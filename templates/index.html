<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">

  <title>tellmeabout.coffee</title>
  <meta name="description" content="tells you about coffee">
  <meta name="author" content="jieb">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='tablesort-modified.css') }}">

</head>

<body>

<!-- Following Menu -->
<div class="ui menu">
  <div class="ui container">
    <h2 class="active item">Tell Me About Coffee</h2>
  </div>
</div>

<div class="ui grid">
<div class="sixteen wide column">
  <div class="ui container">
    <div class="ui fluid input">
      <input type="search" class="search" data-column="all" placeholder="Search for Roaster, Region, or Tasting Note">
    </div>
  </div>
</div>

<div class="sixteen wide column">
  <div class="ui container">
    <table class="ui sortable table">
      <thead>
        <tr>
          <th class="no-sort"></th>
          <th>Roaster</th>
          <th>Region</th>
          <th class="one wide">Size</th>
          <th class="two wide center aligned">Price ($USD)</th>
        </tr>
      </thead>
      <tbody>
        {% for coffee in coffees %}
        <tr>
          <td>
            <a href={{ coffee.product_page }} >
            <img class="ui small image" src="/images/coffee/{{ coffee.key.id() }}">
            </a>
          </td>
          <td>
            <div class="content">
              <h4 class="header">{{ coffee.name }}</h4>
                <div class="meta roaster">
                  <a href={{coffee.product_page}}>{{ coffee.roaster }}</a>
                </div>
              <div class="description">
                {{ coffee.description }}
              </div>
              <br>
              <div class="extra">
                {% for note in coffee.notes %}
                <div class="ui label">{{ note }}</div>
                {% endfor %}
              </div>
            </div>
          </td>
          <td> {{ coffee.region}}</td>
          <td> {{ coffee.size}}</td>
          <td class="center aligned"> {{ coffee.price}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.js"></script>
<script src="{{ url_for('static', filename='jquery.tablesorter.combined.min.js') }}"></script>
<script src="{{ url_for('static', filename='widget-filter.min.js') }}"></script>
<script>
  $(document).ready(function(){
    $('table').tablesorter({
      headers: {
        '.no-sort': {
          sorter: false
        }
      },
      textExtraction: {
        1: function(node, table, cellIndex){ return $(node).find(".roaster").text() + $(node).find(".extra").text(); }
      },
      widgets: ["filter"],
      widgetOptions : {
        filter_external : 'input.search',
        filter_columnFilters: false,
        filter_childRows   : true
      }
    })
  })
</script>

</body>
</html>
